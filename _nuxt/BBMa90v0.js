import{d as Dt,r as q,j as S,H as Ct,I as M,v as r,J as i,K as Xt,L as Zt,g as j,A,x as l,M as te,t as w,N as k,B as Tt,y as h,z as P,O as dt,P as z,Q as Z,R as ee,S as le,T as ae,U as se,V as ne,W as oe,X as ie,Y as re,a as ue,Z as ce,o as me,$ as de,a0 as be}from"./CNQux7jF.js";const fe=Dt({__name:"pie",props:{name:{},data:{},legendPosition:{default:"bottom"}},setup(e){const t=q(null),a=e,o=S(()=>{switch(a.legendPosition){case"right":return{radius:["55%","50%"],center:["25%","50%"]};case"bottom":return{radius:["65%","70%"],center:["50%","30%"]}}}),x=S(()=>{switch(a.legendPosition){case"right":return{height:"100%",left:"40%",top:"15%"};case"bottom":return{height:"50%",top:"60%",left:"left"}}}),m=()=>({legend:{icon:"square",orient:"vertical",type:"scroll",textStyle:{color:"#E5E7EBFF"},...x.value},series:[{name:a.name,type:"pie",avoidLabelOverlap:!1,label:{show:!0,formatter:()=>a.name,position:"center",color:"#94A3B8",fontSize:"12px"},labelLine:{show:!1},data:a.data,...o.value}]}),N=q(m());return Ct(()=>[a.data,a.name,a.legendPosition],()=>{N.value=m()}),(E,y)=>(r(),M(i(Xt),{ref_key:"chartRef",ref:t,option:i(N),autoresize:""},null,8,["option"]))}}),Rt=function(e){return e==null?"":typeof e=="string"?parseFloat(e).toLocaleString("en-US"):e.toLocaleString("en-US")},Y=function(e){return e==null||e===""?"":`$${e}`},H=function(e,t=2){return e==null?e:(typeof e=="string"&&(e=parseFloat(e)),e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t}))},pe={class:"flex flex-col gap-5"},ge={class:"flex justify-between"},ve={class:"flex flex-col md:flex-row gap-4 md:gap-3"},xe={class:"flex gap-1 md:justify-center md:items-center"},ye={class:"text-lg"},_e={key:0,class:"text-slate-500 font-medium"},he={class:"font-semibold"},we={key:1,class:"text-slate-500 font-medium"},ke={class:"text-lg font-medium"},Me={key:0,class:"flex gap-3"},$e={class:"text-sm font-semibold"},Le={class:"text-sm font-semibold"},Ae={class:"flex justify-center items-center gap-1.5"},Ce={class:"text-sm font-semibold"},Te={class:"text-slate-400 text-sm font-medium"},De={class:"flex justify-between"},Se={class:"flex gap-4 flex-col xl:flex-row xl:justify-between"},Ee={key:0,class:"flex gap-3 flex-wrap"},Ve={class:"flex justify-center items-center gap-1.5"},Ne={class:"text-slate-400 text-sm font-medium"},Ie={class:"text-sm font-semibold"},Pe={class:"flex gap-3 flex-wrap"},Oe={class:"flex justify-center items-center gap-1.5"},je={class:"text-sm font-semibold"},ze={class:"flex justify-center items-center gap-1.5"},Re={class:"text-sm font-semibold"},Be={class:"text-sm font-semibold"},Fe={class:"text-sm font-semibold"},Ge={class:"flex justify-center items-center gap-1.5"},qe={class:"text-sm font-semibold"},Ue=Dt({__name:"model-availability-card",props:{model:{},secondary:{type:Boolean},groupKey:{}},setup(e){const t=e,a=S(()=>{if(!t.groupKey||!t.model.model)return{before:"",match:t.model.model,after:""};const y=t.model.model.toLowerCase(),c=t.groupKey.toLowerCase(),f=y.indexOf(c);return f===-1?{before:"",match:t.model.model,after:""}:{before:t.model.model.slice(0,f),match:t.model.model.slice(f,f+t.groupKey.length),after:t.model.model.slice(f+t.groupKey.length)}}),o=Zt(),x=S(()=>t.model.lastStatus?t.model.lastStatus.status==="AVAILABLE"?"bg-emerald-500":"bg-red-500":"bg-gray-700"),m=S(()=>{const y=t.model.upTimePercentage;return y!==null?y>=80?"emerald":y>=50?"amber":"red":""}),N=S(()=>[{label:"TtFC",index:6},{label:"2k",index:0},{label:"4k",index:1},{label:"8k",index:2},{label:"16k",index:3},{label:"32k",index:4}]),E=S(()=>t.model.inputCost!=null&&t.model.outputCost!=null);return(y,c)=>{const f=j("u-badge"),J=j("u-icon"),R=j("u-card");return r(),M(R,{class:dt(y.secondary?"":"border border-gray-700 rounded-md"),ui:{background:y.secondary?"bg-white dark:bg-gray-900":""}},{default:A(()=>[l("div",pe,[l("div",ge,[l("div",ve,[l("div",null,[y.model.upTimePercentage!==null?(r(),M(f,{key:0,size:"lg",variant:"subtle",ui:{variant:{subtle:`bg-${i(m)}-50 dark:bg-${i(m)}-400 dark:bg-opacity-10 text-${i(m)}-500 dark:text-${i(m)}-400 ring-1 ring-inset ring-${i(m)}-500 dark:ring-${i(m)}-400 ring-opacity-25 dark:ring-opacity-25`}}},{default:A(()=>[Tt(h(y.model.upTimePercentage.toFixed(2))+"% ",1)]),_:1},8,["ui"])):k("",!0)]),l("div",xe,[P(J,{class:dt(["h-6 w-6",i(x)]),name:"i-heroicons-check-circle"},null,8,["class"]),l("span",ye,[i(a).before?(r(),w("span",_e,h(i(a).before),1)):k("",!0),l("span",he,h(i(a).match),1),i(a).after?(r(),w("span",we,h(i(a).after),1)):k("",!0)]),l("span",ke,"("+h(y.model.provider)+")",1)])]),i(o).isGreaterOrEquals("xl")?(r(),w("div",Me,[i(E)?(r(),M(f,{key:0,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[c[0]||(c[0]=l("span",{class:"text-slate-400 text-sm font-medium"},"Input:",-1)),l("span",$e,h(i(Y)(i(H)(t.model.inputCost,2))),1),c[1]||(c[1]=l("span",{class:"text-slate-400 text-sm font-medium"},"/M",-1))]),_:1})):k("",!0),i(E)?(r(),M(f,{key:1,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[c[2]||(c[2]=l("span",{class:"text-slate-400 text-sm font-medium"},"Output:",-1)),l("span",Le,h(i(Y)(i(H)(t.model.outputCost,2))),1),c[3]||(c[3]=l("span",{class:"text-slate-400 text-sm font-medium"},"/M",-1))]),_:1})):t.model.avgCost?(r(),M(f,{key:2,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[l("div",Ae,[l("span",Ce,h(i(Y)(i(H)(t.model.avgCost,5))),1),l("span",Te,h(["image","embedding"].includes(t.model.type)?"avg":"1000/char"),1)])]),_:1})):k("",!0)])):k("",!0)]),l("div",De,[(r(!0),w(z,null,Z(y.model.states,p=>(r(),w("div",{class:dt({"md:w-[3px]":!0,"w-[1px]":!0,"xl:w-1.5":!0,"h-1.5":!0,"bg-emerald-500":p===100,"bg-red-500":p===0,"bg-gray-700":p===null,"bg-amber-500":p!==null&&p>0&&p<100,"rounded-md":!0})},null,2))),256))]),l("div",Se,[i(o).isGreaterOrEquals("md")?(r(),w("div",Ee,[(r(!0),w(z,null,Z(i(N),p=>(r(),w(z,{key:p.label},[t.model.latenciesFormatted.length>p.index?(r(),M(f,{key:0,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[l("div",Ve,[l("div",{class:dt(["w-2 h-2 rounded-md",{"bg-emerald-500":t.model.latenciesRating[p.index]>=80,"bg-amber-500":t.model.latenciesRating[p.index]>=30&&t.model.latenciesRating[p.index]<80,"bg-red-500":t.model.latencies[p.index]!==null&&t.model.latenciesRating[p.index]<30,"bg-gray-700":t.model.latencies[p.index]===null}])},null,2),l("span",Ne,h(p.label),1),l("span",Ie,h(t.model.latenciesFormatted[p.index]),1)])]),_:2},1024)):k("",!0)],64))),128))])):k("",!0),l("div",Pe,[t.model.maxTokens&&i(o).isGreaterOrEquals("md")?(r(),M(f,{key:0,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[l("div",Oe,[l("span",je,h(i(Rt)(t.model.maxTokens)),1),c[4]||(c[4]=l("span",{class:"text-slate-400 text-sm font-medium"},"MaxTokens",-1))])]),_:1})):k("",!0),t.model.maxResponseTokens&&i(o).isGreaterOrEquals("md")?(r(),M(f,{key:1,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[l("div",ze,[l("span",Re,h(i(Rt)(t.model.maxResponseTokens)),1),c[5]||(c[5]=l("span",{class:"text-slate-400 text-sm font-medium"},"MaxResponse",-1))])]),_:1})):k("",!0),i(o).isLessThan("xl")?(r(),w(z,{key:2},[i(E)?(r(),M(f,{key:0,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[c[6]||(c[6]=l("span",{class:"text-slate-400 text-sm font-medium"},"Input:",-1)),l("span",Be,h(i(Y)(i(H)(t.model.inputCost,2))),1),c[7]||(c[7]=l("span",{class:"text-slate-400 text-sm font-medium"},"/M",-1))]),_:1})):k("",!0),i(E)?(r(),M(f,{key:1,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[c[8]||(c[8]=l("span",{class:"text-slate-400 text-sm font-medium"},"Output:",-1)),l("span",Fe,h(i(Y)(i(H)(t.model.outputCost,2))),1),c[9]||(c[9]=l("span",{class:"text-slate-400 text-sm font-medium"},"/M",-1))]),_:1})):t.model.avgCost?(r(),M(f,{key:2,size:"lg",color:"gray",variant:"solid"},{default:A(()=>[l("div",Ge,[l("span",qe,h(i(Y)(i(H)(t.model.avgCost,5))),1),c[10]||(c[10]=l("span",{class:"text-slate-400 text-sm font-medium"},"1000/char",-1))])]),_:1})):k("",!0)],64)):k("",!0)])]),te(y.$slots,"default")])]),_:3},8,["class","ui"])}}}),Ke=36e5,Bt=Symbol.for("constructDateFrom");function U(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Bt in e?e[Bt](t):e instanceof Date?new e.constructor(t):new Date(t)}function tt(e,t){return U(t||e,e)}function Ye(e,t,a){const o=tt(e,a==null?void 0:a.in);return isNaN(t)?U(e,NaN):(t&&o.setDate(o.getDate()+t),o)}function He(e,t,a){const o=tt(e,a==null?void 0:a.in);if(isNaN(t))return U(e,NaN);if(!t)return o;const x=o.getDate(),m=U(e,o.getTime());m.setMonth(o.getMonth()+t+1,0);const N=m.getDate();return x>=N?m:(o.setFullYear(m.getFullYear(),m.getMonth(),x),o)}function Qe(e,...t){const a=U.bind(null,t.find(o=>typeof o=="object"));return t.map(a)}function Je(e,t){let a,o=t==null?void 0:t.in;return e.forEach(x=>{!o&&typeof x=="object"&&(o=U.bind(null,x));const m=tt(x,o);(!a||a>m||isNaN(+m))&&(a=m)}),U(o,a||NaN)}function Gt(e){return t=>{const o=(e?Math[e]:Math.trunc)(t);return o===0?0:o}}function $t(e,t,a){const[o,x]=Qe(a==null?void 0:a.in,e,t),m=(+o-+x)/Ke;return Gt(a==null?void 0:a.roundingMethod)(m)}function We(e,t){return+tt(e)-+tt(t)}function bt(e,t,a){const o=We(e,t)/1e3;return Gt(a==null?void 0:a.roundingMethod)(o)}function Xe(e,t,a){return Ye(e,-t,a)}function Ze(e,t,a){return He(e,-t,a)}function tl(e,t,a){const{years:o=0,months:x=0,weeks:m=0,days:N=0,hours:E=0,minutes:y=0,seconds:c=0}=t,f=Ze(e,x+o*12,a),J=Xe(f,N+m*7,a),R=y+E*60,et=(c+R*60)*1e3;return U(e,+J-et)}function el(e){const t=Math.floor(e/1e3),a=Math.floor(t/60),o=t%60;return{milliseconds:e%1e3,seconds:o,minutes:a}}const ll={class:"flex flex-col gap-5 w-full"},al={class:"flex flex-col gap-4 md:flex-row md:gap-0 justify-between"},sl={class:"grid gap grid-cols-1 xl:grid-cols-2 gap-5"},nl={class:"flex flex-col md:flex-row gap-5 md:h-full"},ol={class:"grid grid-cols-2 md:grid-cols-4 xl:grid-cols-2 gap-4"},il={class:"flex flex-col gap-0.5"},rl={class:"text-gray-400 text-sm font-medium"},ul={class:"text-2xl md:text-3xl font-semibold"},cl={key:0,class:"col-span-2 h-0px border dark:border-gray-700"},ml={key:0,class:"col-span-4 h-0px border dark:border-gray-700"},dl={class:"flex flex-col gap-5"},bl={class:"flex flex-col gap-4 md:flex-row justify-between"},fl={class:"flex justify-between gap-4"},pl={class:"flex flex-col gap-5"},gl={class:"flex flex-col gap-2"},vl={class:"flex justify-between"},Ft=30,Lt=8,Q=90,At=20,yl=Dt({__name:"index",async setup(e){let t,a;ee([le,ae,se,ne,oe,ie,re]);const o=ue(),x=o.$viewport,m=o.$api,N=o.$toPairs,E=o.$orderBy,y=o.$min,c=o.$max,f=[{name:"Language Models",type:"llm"},{name:"Voice Models",type:"voice"},{name:"Vision Models",type:"vision"},{name:"Moderation Models",type:"moderation"},{name:"Image Models",type:"image"},{name:"Embedding Models",type:"embedding"},{name:"Coding Models",type:"code"},{name:"Video Models",type:"video"}],J=[{key:"all",label:"All"},{key:"llm",label:"Language"},{key:"voice",label:"Voice"},{key:"image",label:"Image"},{key:"vision",label:"Vision"},{key:"embedding",label:"Embedding"},{key:"code",label:"Coding"},{key:"video",label:"Video"}],R=q("all"),p=q(!0),et=(u,s)=>s===0?0:u/s*100,{data:St}=([t,a]=ce(()=>m("/models",{})),t=await t,a(),t),qt=S(()=>{const u=new Map;for(const s of St.value||[])u.set(`${s.provider}_${s.route}`,s);return u}),lt=S(()=>{const u={llm:0,voice:0,vision:0,moderation:0,image:0,embedding:0,code:0,video:0};let s=0;const g={},$={};for(const v of St.value||[]){if(u[v.type]++,R.value!=="all"&&v.type!==R.value)continue;const _=parseInt(v.query_count);s+=_,v.provider in g||(g[v.provider]=0),g[v.provider]+=_,v.model in $||($[v.model]=0),$[v.model]+=_}for(const[v,_]of Object.entries(g))g[v]=et(_,s);for(const[v,_]of Object.entries($))$[v]=et(_,s);return{byType:u,byProvider:g,byModel:$}}),Ut=S(()=>E(N(lt.value.byProvider),u=>u[1],"desc").slice(0,5).map(([u,s])=>({name:`${u} (${s.toFixed(0)}%)`,value:s}))),Kt=S(()=>E(N(lt.value.byModel),u=>u[1],"desc").slice(0,5).map(([u,s])=>({name:`${u} (${s.toFixed(0)}%)`,value:s}))),W=q(""),at=q("desc"),st=q(1),Et=q(new Map),Vt=S(()=>{const u=W.value?W.value.toLowerCase():"";return new Map(E(Array.from(Et.value.entries()).filter(([s,g])=>{if(!u)return!0;const $=typeof s=="string"&&s.toLowerCase().includes(u),v=g.some(_=>typeof _.provider=="string"&&_.provider.toLowerCase().includes(u));return $||v}),[([s,g])=>lt.value.byModel[s]||0,([s,g])=>g[0].upTimePercentage||0],["desc",at.value]))}),Yt=S(()=>{const u=Array.from(Vt.value.entries());if(u.length===0)return new Map;const s=(st.value-1)*At,g=Math.min(s+At,u.length);return new Map(u.slice(s,g))}),Nt=async u=>{p.value=!0;const{data:s}=await m("/models/availability",{params:{type:u!=="all"?u:void 0,period:Ft},server:!1}),g=new Date,$=tl(g,{days:Ft}),v=bt(g,$),_=new Map,V=[];for(let n=0;n<7;n++)V.push({min:1/0,max:-1/0});const ft={"mistral-large":["mistral-large","large-latest"],"gemini-flash-1.5":["gemini-flash-1.5","gemini-1.5-flash"],"gemini-pro-1.5":["gemini-pro-1.5","gemini-1.5-pro"],"llama-2-13b-chat":["llama-2-13b-chat","llama2-13b-chat"],"llama-2-7b-chat":["llama-2-7b-chat","llama2-7b-chat"],"llama-3.1-405b-instruct-turbo":["llama-3.1-405b-instruct-turbo","llama3.1-405b-instruct-turbo"],"llama-3.1-8b-instruct-turbo":["llama-3.1-8b-instruct-turbo","llama3.1-8b-instruct-turbo"],"llama-3.1-lumimaid-70b":["llama-3.1-lumimaid-70b","llama3.1-lumimaid-70b"],"llama-3.1-lumimaid-8b":["llama-3.1-lumimaid-8b","llama3.1-lumimaid-8b"],"llama-3.1-nemotron-70b-instruct":["llama-3.1-nemotron-70b-instruct","llama3.1-nemotron-70b-instruct"],"llama-3.2-11b-vision-instruct":["llama-3.2-11b-vision-instruct","llama3.2-11b-vision-instruct"],"llama-3.2-1b-instruct":["llama-3.2-1b-instruct","llama3.2-1b-instruct"],"llama-3.2-3b-instruct":["llama-3.2-3b-instruct","llama3.2-3b-instruct"],"llama-3.2-3b-instruct-turbo":["llama-3.2-3b-instruct-turbo","llama3.2-3b-instruct-turbo"],"llama-3.2-90b-vision-instruct":["llama-3.2-90b-vision-instruct","llama3.2-90b-vision-instruct"],"llama-3.2-90b-vision-instruct-turbo":["llama-3.2-90b-vision-instruct-turbo","llama3.2-90b-vision-instruct-turbo"],"llama-3.3-70b-instruct":["llama-3.3-70b-instruct","llama3.3-70b-instruct"],"llama-3.3-70b-instruct-turbo":["llama-3.3-70b-instruct-turbo","llama3.3-70b-instruct-turbo"],"llama-3-1-405b-instruct":["llama-3-1-405b-instruct","llama3-1-405b-instruct"],"llama-3-1-70b-instruct":["llama-3-1-70b-instruct","llama3-1-70b-instruct"],"llama-3-1-8b-instruct":["llama-3-1-8b-instruct","llama3-1-8b-instruct"],"llama-3-70b":["llama-3-70b","llama3-70b"],"llama-3-70b-chat":["llama-3-70b-chat","llama3-70b-chat"],"llama-3-70b-instruct":["llama-3-70b-instruct","llama3-70b-instruct"],"llama-3-70b-instruct-lite":["llama-3-70b-instruct-lite","llama3-70b-instruct-lite"],"llama-3-70b-instruct-turbo":["llama-3-70b-instruct-turbo","llama3-70b-instruct-turbo"],"llama-3-8b":["llama-3-8b","llama3-8b"],"llama-3-8b-chat":["llama-3-8b-chat","llama3-8b-chat"],"llama-3-8b-instruct":["llama-3-8b-instruct","llama3-8b-instruct"],"llama-3-8b-instruct-lite":["llama-3-8b-instruct-lite","llama3-8b-instruct-lite"],"llama-3-8b-instruct-turbo":["llama-3-8b-instruct-turbo","llama3-8b-instruct-turbo"]},pt=["claude-3-haiku","claude-3-sonnet","claude-3-5-sonnet","claude-1","claude-instant-1","claude-2","mistral-7b-openorca","claude-3","claude-3-5","claude-3-5-haiku","claude-3-opus","clip-vit-b","clip-vit-large","codellama-13b-instruct","CodeLlama-34b-Instruct","CodeLlama-70b-Instruct","codestral","command","command-light","command-r","command-r-plus","embed-english-light-v2.0","embed-english-light-v3.0","embed-english-v2.0","embed-english-v3","embed-multilingual-v2.0","embed-multilingual-v3.0","gemini-flash","gemini-flash-8b","gemini-pro","gemini-pro-8k","gemini-pro-vision","gemma-2-27b","gemma-2-9b","gpt-3.5-turbo","gpt-3.5-turbo-instruct","gpt-4","gpt-4o","gpt-4o-mini","gpt-4-turbo","jamba-1-5-large","jamba-1-5-mini","jamba-instruct","nous-hermes-2-mixtral-8x7b","llama-guard-2-8b","llama-guard-3-11B-vision-turbo","Llama-Guard-3-8B","Llama-Rank","mistral-7b-instruct","mistral-nemo","mistral-small","mistral-tiny","mixtral-8x22B","mixtral-8x22b-instruct","mixtral-8x7b","mixtral-8x7b-instruct","mythomax-l2-13b","o1","o1-mini","o1-mini","o1-preview","stable-diffusion-2-1","stable-diffusion-v1-5","stable-diffusion-v2","stable-diffusion-xl","text-embedding-ada-002","mistral-large","large-latest","gemini-flash-1.5","gemini-1.5-flash","gemini-pro-1.5","gemini-1.5-pro","llama-2-13b-chat","llama2-13b-chat","llama-2-7b-chat","llama2-7b-chat","llama-3.1-405b-instruct-turbo","llama3.1-405b-instruct-turbo","llama-3.1-8b-instruct-turbo","llama3.1-8b-instruct-turbo","llama-3.1-lumimaid-70b","llama3.1-lumimaid-70b","llama-3.1-lumimaid-8b","llama3.1-lumimaid-8b","llama-3.1-nemotron-70b-instruct","llama3.1-nemotron-70b-instruct","llama-3.2-11b-vision-instruct","llama3.2-11b-vision-instruct","llama-3.2-1b-instruct","llama3.2-1b-instruct","llama-3.2-3b-instruct","llama3.2-3b-instruct","llama-3.2-3b-instruct-turbo","llama3.2-3b-instruct-turbo","llama-3.2-90b-vision-instruct","llama3.2-90b-vision-instruct","llama-3.2-90b-vision-instruct-turbo","llama3.2-90b-vision-instruct-turbo","llama-3.3-70b-instruct","llama3.3-70b-instruct","llama-3.3-70b-instruct-turbo","llama3.3-70b-instruct-turbo","llama-3-1-405b-instruct","llama3-1-405b-instruct","llama-3-1-70b-instruct","llama3-1-70b-instruct","llama-3-1-8b-instruct","llama3-1-8b-instruct","llama-3-70b","llama3-70b","llama-3-70b-chat","llama3-70b-chat","llama-3-70b-instruct","llama3-70b-instruct","llama-3-70b-instruct-lite","llama3-70b-instruct-lite","llama-3-70b-instruct-turbo","llama3-70b-instruct-turbo","llama-3-8b","llama3-8b","llama-3-8b-chat","llama3-8b-chat","llama-3-8b-instruct","llama3-8b-instruct","llama-3-8b-instruct-lite","llama3-8b-instruct-lite","llama-3-8b-instruct-turbo","llama3-8b-instruct-turbo"].map(n=>n.toLowerCase()).sort((n,d)=>d.length-n.length),nt=Object.entries(ft).reduce((n,[d,b])=>(n[d.toLowerCase()]=b.map(L=>L.toLowerCase()),n),{}),gt=Object.entries(nt).sort(([n],[d])=>d.length-n.length);for(const n of s.value||[]){const d=n.model.toLowerCase(),b=`${n.provider}_${n.model}`;let L=d;const B=pt.find(T=>L.includes(T));B&&(L=B);const vt=gt.find(([T,F])=>F.some(I=>I===L||L.includes(I)));if(vt){const T=vt[0],F=vt[1].find(I=>d.includes(I.toLowerCase()));if(F){const I=F.toLowerCase(),D=n.model.toLowerCase().indexOf(I);if(D!==-1){const O=D>0?n.model.slice(0,D):"",ht=D+I.length<n.model.length?n.model.slice(D+I.length):"";n.model=O+T+ht}}L=T.toLowerCase()}_.has(L)||_.set(L,new Map);const xt=_.get(L),ot=new Date(n.last_previous_status_dt||n.created_dt);if(!xt.has(b)){const T=qt.value.get(`${n.provider}_${n.route}`);if(!T){console.log(`Model ${n.provider}/${n.route} is not presented in models!`);continue}let F=new Date(n.created_dt);F=Je([F,ot]);const I=$t(F,$),_t=$t(ot,$);let D,O=0;I>0?D=Math.floor(I/Lt):D=0,_t>0?O=Math.floor(_t/Lt):(O=Q,D=0),D+O>Q?D=Q-O:D+O<Q&&(O=O+(Q-D));const ht=[...Array(D).fill(null),...Array(O).fill(n.last_previous_status==="AVAILABLE"?100:n.last_previous_status==="UNAVAILABLE"?0:null)];let[rt,ut,wt,zt]=[0,null,null,void 0];n.last_previous_status_dt&&n.last_previous_status&&(rt=y([bt(g,ot),v]),n.last_previous_status==="AVAILABLE"?(ut=rt,wt=ut/rt*100):(ut=0,wt=0),zt={dt:ot,status:n.last_previous_status});const kt=[],Mt=[],Jt=[];T.latency.split("/").forEach((Wt,ct)=>{const K=parseFloat(Wt);if(Number.isNaN(K)){kt.push(null),Mt.push("n/a");return}kt.push(K),K<V[ct].min&&(V[ct].min=K),K>V[ct].max&&(V[ct].max=K);const G=el(K),mt=[];G.minutes&&mt.push(`${G.minutes}m`),G.seconds&&!G.minutes&&mt.push(`${G.seconds}s`),G.milliseconds&&!G.seconds&&mt.push(`${G.milliseconds}ms`),Mt.push(mt.join(""))}),xt.set(b,{model:n.model,provider:n.provider,type:T.type,avgCost:T.avg_cost??null,inputCost:T.input_cost??null,outputCost:T.output_cost??null,maxTokens:T.max_tokens??null,maxResponseTokens:T.max_response_tokens??null,latencies:kt,latenciesFormatted:Mt,latenciesRating:Jt,states:ht,isExpanded:!1,totalTracked:rt,upTime:ut,upTimePercentage:wt,lastStatus:zt})}if(!n.status||!n.status_dt)continue;const C=xt.get(b),it=new Date(n.status_dt),It=y([bt(g,it),v]);let X=C.upTime||0;C.lastStatus&&C.lastStatus.status!==n.status?n.status==="UNAVAILABLE"?X-=It:n.status==="AVAILABLE"&&(X+=It):C.lastStatus||(C.totalTracked=c([bt(g,it),C.totalTracked]),n.status==="AVAILABLE"&&(X=C.totalTracked)),C.lastStatus={dt:it,status:n.status},C.upTime=X,C.upTimePercentage=X/C.totalTracked*100;const Pt=Math.floor($t(g,it)/Lt)+1,yt=Q-Pt,Ot=n.status==="AVAILABLE"?100:0,Qt=C.states[yt];let jt=Ot;Qt!==null&&(jt=50),C.states=[...yt>0?C.states.slice(0,yt-1):[],jt,...Array(Pt).fill(Ot)]}Et.value=new Map(Array.from(_).filter(([n,d])=>d.size>0).map(([n,d])=>[n,E(Array.from(d.values()).map(b=>(b.latenciesRating=b.latencies.map((L,B)=>L===null?0:V[B].min===V[B].max?100:100-(L-V[B].min)/(V[B].max-V[B].min)*100),b)),({upTimePercentage:b})=>b||0,"desc")])),p.value=!1},Ht=()=>{window.location="mailto:support@neuronicai.com?subject=Please add my aggregator to APIpie, here are the details"};return Ct(R,async u=>{await Nt(u)}),Ct(W,()=>{st.value=1}),me(async()=>{await Promise.resolve(),await Nt()}),(u,s)=>{const g=j("u-icon"),$=j("u-button"),v=fe,_=j("u-card"),V=j("u-progress"),ft=j("u-select-menu"),pt=j("u-input"),nt=Ue,gt=j("u-pagination"),n=de("auto-animate");return r(),w("div",ll,[l("div",al,[s[6]||(s[6]=l("div",{class:"text-2xl md:text-3xl font-semibold"},"Global AI Overview",-1)),l("div",null,[P($,{color:"gray",variant:"solid",onClick:Ht},{default:A(()=>[P(g,{name:"i-heroicons-outline-plus"}),s[5]||(s[5]=Tt(" Add Your Aggregator "))]),_:1})])]),l("div",sl,[P(_,{class:"md:h-[192px] xl:h-[368px]",ui:{body:{base:"h-full"}}},{default:A(()=>[l("div",nl,[P(v,{class:"h-[190px] md:h-full",name:"Top Providers",data:Ut.value,"legend-position":i(x).isGreaterOrEquals("xl")?"bottom":"right"},null,8,["data","legend-position"]),s[7]||(s[7]=l("div",{class:"md:rotate-180 h-0.5 md:h-0 w-full md:w-[4px] dark:bg-gray-700"},null,-1)),P(v,{class:"h-[190px] md:h-full",name:"Top Models",data:Kt.value,"legend-position":i(x).isGreaterOrEquals("xl")?"bottom":"right"},null,8,["data","legend-position"])])]),_:1}),P(_,{class:"md:h-[192px] xl:h-[368px]"},{default:A(()=>[l("div",ol,[(r(),w(z,null,Z(f,(d,b)=>(r(),w(z,null,[l("div",il,[l("div",rl,h(d.name),1),l("div",ul,h(lt.value.byType[d.type]),1)]),i(x).isGreaterOrEquals("xl")||i(x).isLessThan("md")?(r(),w(z,{key:0},[(b+1)%2===0&&b<f.length-1?(r(),w("div",cl)):k("",!0)],64)):(r(),w(z,{key:1},[(b+1)%4===0&&b<f.length-1?(r(),w("div",ml)):k("",!0)],64))],64))),64))])]),_:1}),P(_,{class:"xl:col-span-2"},{default:A(()=>[l("div",dl,[p.value?(r(),M(V,{key:0,animation:"carousel"})):k("",!0),s[10]||(s[10]=l("div",{class:"text-sm font-semibold"},"Availability last 30 days",-1)),l("div",bl,[P(ft,{modelValue:R.value,"onUpdate:modelValue":s[0]||(s[0]=d=>R.value=d),color:"gray",class:"w-full md:w-96",size:"lg",options:J,"value-attribute":"key","option-attribute":"label"},null,8,["modelValue"]),l("div",fl,[at.value==="asc"?(r(),M($,{key:0,icon:"i-heroicons-bars-arrow-up",size:"lg",color:"gray",variant:"solid",square:"",onClick:s[1]||(s[1]=d=>at.value="desc")})):(r(),M($,{key:1,icon:"i-heroicons-bars-arrow-down",size:"lg",color:"gray",variant:"solid",square:"",onClick:s[2]||(s[2]=d=>at.value="asc")})),P(pt,{modelValue:W.value,"onUpdate:modelValue":s[3]||(s[3]=d=>W.value=d),class:"w-full md:w-auto",icon:"i-heroicons-magnifying-glass-20-solid",size:"lg",color:"gray",trailing:!1,placeholder:"Search..."},null,8,["modelValue"])])]),l("div",pl,[(r(!0),w(z,null,Z(Yt.value.entries(),([d,b])=>(r(),M(nt,{model:{...b[0],model:b[0].model},"group-key":d},{default:A(()=>[s[9]||(s[9]=l("div",{class:"h-[0px] border border-gray-700"},null,-1)),be((r(),w("div",gl,[b[0].isExpanded?(r(!0),w(z,{key:0},Z(b.slice(1),L=>(r(),M(nt,{model:{...L,model:L.model},"group-key":d,secondary:""},null,8,["model","group-key"]))),256)):k("",!0)])),[[n]]),l("div",vl,[s[8]||(s[8]=l("div",null,null,-1)),b.length>1?(r(),M($,{key:0,size:"2xs",icon:b[0].isExpanded?"i-heroicons-chevron-up":"i-heroicons-chevron-down",color:"white",variant:"solid",trailing:"",onClick:L=>b[0].isExpanded=!b[0].isExpanded},{default:A(()=>[Tt(h(b[0].isExpanded?"Collapse":"Expand"),1)]),_:2},1032,["icon","onClick"])):k("",!0)])]),_:2},1032,["model","group-key"]))),256)),P(gt,{modelValue:st.value,"onUpdate:modelValue":s[4]||(s[4]=d=>st.value=d),"page-count":At,total:Vt.value.size},null,8,["modelValue","total"])])])]),_:1})])])}}});export{yl as default};
