import{au as pt,g as _,q as O,h as H,o as gt,a0 as Ue,K as fe,b6 as Ye,l as $,b as lt,F as Tt,n as V,bj as qe,c as $e,p as st,f as Ke,i as it,ap as Wt,aR as Nt,B as kt,j as Xe,bk as zt,be as Ze,bf as Je,b9 as ve,ba as Qe,bb as je,b8 as tr,a$ as er}from"./DgrlDNDf.js";import{aZ as rr,am as he,bK as nr,aW as ar,bL as ir,bM as Ht,bN as or,bO as sr,ay as bt,M as ur,aJ as lr,b0 as cr,bP as fr,i as Ft,n as de,v as G,s as vr,a6 as X,Y as hr,an as rt,w as dr,bQ as Ut,bR as mr,bS as nt,bT as pr,bU as T,bV as me,bW as pe,bX as mt,bY as Yt,p as Rt,bZ as gr,b_ as yr,b$ as ge,c0 as ye,c1 as _e,c2 as Me,c3 as xe,c4 as be,c5 as qt,c6 as _r,c7 as Mr,c8 as xr,c9 as br,ca as Ir,cb as Sr,cc as Dr,cd as wr,r as Lr,a4 as $t,a3 as It,h as Er,m as Kt}from"./B8bEpPzb.js";import{D as Or}from"./CoHqWZrp.js";import{E as Cr,a as Xt,C as Zt,P as Nr,T as kr,y as Rr,w as Ar,A as Tr,u as Fr,t as Pr,q as Br,p as Vr,o as Gr,n as Wr,m as zr,l as Hr,k as Ur}from"./LyrMl2Ci.js";import{j as Yr}from"./BOvz1jQK.js";var qr=function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function $r(n,t){var e={},r=e.encode={},a=pt(),i=[],o=[],s={};_(n.dimensions,function(v){var f=n.getDimensionInfo(v),d=f.coordDim;if(d){var y=f.coordDimIndex;St(r,d)[y]=v,f.isExtraCoord||(a.set(d,1),Kr(f.type)&&(i[0]=v),St(s,d)[y]=n.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(v)}rr.each(function(M,m){var p=St(r,m),x=f.otherDims[m];x!=null&&x!==!1&&(p[x]=f.name)})});var u=[],l={};a.each(function(v,f){var d=r[f];l[f]=d[0],u=u.concat(d)}),e.dataDimsOnCoord=u,e.dataDimIndicesOnCoord=O(u,function(v){return n.getDimensionInfo(v).storeDimIndex}),e.encodeFirstDimNotExtra=l;var c=r.label;c&&c.length&&(i=c.slice());var h=r.tooltip;return h&&h.length?o=h.slice():o.length||(o=i.slice()),r.defaultedLabel=i,r.defaultedTooltip=o,e.userOutput=new qr(s,t),e}function St(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function aa(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Kr(n){return!(n==="ordinal"||n==="time")}var Dt=function(){function n(t){this.otherDims={},t!=null&&H(this,t)}return n}(),Xr=he(),Zr={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Jr=function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=jr(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return Ue(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=nr(this.source),r=!tn(t),a="",i=[],o=0,s=0;o<t;o++){var u=void 0,l=void 0,c=void 0,h=this.dimensions[s];if(h&&h.storeDimIndex===o)u=e?h.name:null,l=h.type,c=h.ordinalMeta,s++;else{var v=this.getSourceDimension(o);v&&(u=e?v.name:null,l=v.type)}i.push({property:u,type:l,ordinalMeta:c}),e&&u!=null&&(!h||!h.isCalculationCoord)&&(a+=r?u.replace(/\`/g,"`1").replace(/\$/g,"`2"):u),a+="$",a+=Zr[l]||"f",c&&(a+=c.uid),a+="$"}var f=this.source,d=[f.seriesLayoutBy,f.startIndex,a].join("$$");return{dimensions:i,hash:d}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,r=0;e<this._fullDimCount;e++){var a=void 0,i=this.dimensions[r];if(i&&i.storeDimIndex===e)i.isCalculationCoord||(a=i.name),r++;else{var o=this.getSourceDimension(e);o&&(a=o.name)}t.push(a)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function Ie(n){return n instanceof Jr}function Qr(n){for(var t=pt(),e=0;e<(n||[]).length;e++){var r=n[e],a=gt(r)?r.name:r;a!=null&&t.get(a)==null&&t.set(a,e)}return t}function jr(n){var t=Xr(n);return t.dimNameMap||(t.dimNameMap=Qr(n.dimensionsDefine))}function tn(n){return n>30}var Q=gt,z=O,en=typeof Int32Array>"u"?Array:Int32Array,rn="e\0\0",Jt=-1,nn=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],an=["_approximateExtent"],Qt,ct,j,tt,wt,et,Lt,ia=function(){function n(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,a=!1;Ie(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(a=!0,r=t),r=r||["x","y"];for(var i={},o=[],s={},u=!1,l={},c=0;c<r.length;c++){var h=r[c],v=st(h)?new Dt({name:h}):h instanceof Dt?h:new Dt(h),f=v.name;v.type=v.type||"float",v.coordDim||(v.coordDim=f,v.coordDimIndex=0);var d=v.otherDims=v.otherDims||{};o.push(f),i[f]=v,l[f]!=null&&(u=!0),v.createInvertedIndices&&(s[f]=[]),d.itemName===0&&(this._nameDimIdx=c),d.itemId===0&&(this._idDimIdx=c),a&&(v.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=i,this._initGetDimensionInfo(u),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var y=this._dimIdxToName=pt();_(o,function(M){y.set(i[M].storeDimIndex,M)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var r=this._dimIdxToName.get(e);if(r!=null)return r;var a=this._schema.getSourceDimension(e);if(a)return a.name},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(fe(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(r){return e.hasOwnProperty(r)?e[r]:void 0}:function(r){return e[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var r=this._dimSummary;if(e==null)return r.encodeFirstDimNotExtra[t];var a=r.encode[t];return a?a[e]:null},n.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,r=e.encode[t];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,r){var a=this,i;if(t instanceof Ht&&(i=t),!i){var o=this.dimensions,s=ar(t)||Ye(t)?new ir(t,o.length):t;i=new Ht;var u=z(o,function(l){return{type:a._dimInfos[l].type,property:l}});i.initData(s,u,r)}this._store=i,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=$r(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var r=this._store.appendValues(t,e&&e.length),a=r.start,i=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=a;s<i;s++){var u=s-a;this._nameList[s]=e[u],o&&Lt(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,r=0;r<e.length;r++){var a=this._dimInfos[e[r]];a.ordinalMeta&&t.collectOrdinalMeta(a.storeDimIndex,a.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==or&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var r=this._store,a=r.getProvider();this._updateOrdinalMeta();var i=this._nameList,o=this._idList,s=a.getSource().sourceFormat,u=s===cr;if(u&&!a.pure)for(var l=[],c=t;c<e;c++){var h=a.getItem(c,l);if(!this.hasItemOption&&sr(h)&&(this.hasItemOption=!0),h){var v=h.name;i[c]==null&&v!=null&&(i[c]=bt(v,null));var f=h.id;o[c]==null&&f!=null&&(o[c]=bt(f,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<e;c++)Lt(this,c);Qt(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){Q(t)?H(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),r=this._nameList[e];return r==null&&this._nameDimIdx!=null&&(r=j(this,this._nameDimIdx,e)),r==null&&(r=""),r},n.prototype._getCategory=function(t,e){var r=this._store.get(t,e),a=this._store.getOrdinalMeta(t);return a?a.categories[r]:r},n.prototype.getId=function(t){return ct(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var r=this._store,a=this._dimInfos[t];if(a)return r.get(a.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var r=this._store,a=this._dimInfos[t];if(a)return r.getByRawIndex(a.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var r=this,a=this._store;return $(t)?a.getValues(z(t,function(i){return r._getStoreDimIndex(i)}),e):a.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,r=0,a=e.length;r<a;r++)if(isNaN(this._store.get(e[r],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,r=this._store.count();e<r;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var r=t&&this._invertedIndicesMap[t],a=r&&r[e];return a==null||isNaN(a)?Jt:a},n.prototype.indicesOfNearest=function(t,e,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,r)},n.prototype.each=function(t,e,r){V(t)&&(r=e,e=t,t=[]);var a=r||this,i=z(tt(t),this._getStoreDimIndex,this);this._store.each(i,a?lt(e,a):e)},n.prototype.filterSelf=function(t,e,r){V(t)&&(r=e,e=t,t=[]);var a=r||this,i=z(tt(t),this._getStoreDimIndex,this);return this._store=this._store.filter(i,a?lt(e,a):e),this},n.prototype.selectRange=function(t){var e=this,r={},a=Tt(t);return _(a,function(i){var o=e._getStoreDimIndex(i);r[o]=t[i]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(t,e,r){V(t)&&(r=e,e=t,t=[]),r=r||this;var a=[];return this.each(t,function(){a.push(e&&e.apply(this,arguments))},r),a},n.prototype.map=function(t,e,r,a){var i=r||a||this,o=z(tt(t),this._getStoreDimIndex,this),s=et(this);return s._store=this._store.map(o,i?lt(e,i):e),s},n.prototype.modify=function(t,e,r,a){var i=r||a||this,o=z(tt(t),this._getStoreDimIndex,this);this._store.modify(o,i?lt(e,i):e)},n.prototype.downSample=function(t,e,r,a){var i=et(this);return i._store=this._store.downSample(this._getStoreDimIndex(t),e,r,a),i},n.prototype.minmaxDownSample=function(t,e){var r=et(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(t),e),r},n.prototype.lttbDownSample=function(t,e){var r=et(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),r},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,r=this.getRawDataItem(t);return new ur(r,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new Or(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return ct(t,r)},function(r){return ct(e,r)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},Q(t)?H(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var r=this._itemVisuals[t],a=r&&r[e];return a??this.getVisual(e)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var r=this._itemVisuals,a=r[t];a||(a=r[t]={});var i=a[e];return i==null&&(i=this.getVisual(e),$(i)?i=i.slice():Q(i)&&(i=H({},i)),a[e]=i),i},n.prototype.setItemVisual=function(t,e,r){var a=this._itemVisuals[t]||{};this._itemVisuals[t]=a,Q(e)?H(a,e):a[e]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){Q(t)?H(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?H(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){var r=this.hostModel&&this.hostModel.seriesIndex;lr(r,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){_(this._graphicEls,function(r,a){r&&t&&t.call(e,r,a)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:z(this.dimensions,this._getDimInfo,this),this.hostModel)),wt(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var r=this[t];V(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var a=r.apply(this,arguments);return e.apply(this,[a].concat(qe(arguments)))})},n.internalField=function(){Qt=function(t){var e=t._invertedIndicesMap;_(e,function(r,a){var i=t._dimInfos[a],o=i.ordinalMeta,s=t._store;if(o){r=e[a]=new en(o.categories.length);for(var u=0;u<r.length;u++)r[u]=Jt;for(var u=0;u<s.count();u++)r[s.get(i.storeDimIndex,u)]=u}})},j=function(t,e,r){return bt(t._getCategory(e,r),null)},ct=function(t,e){var r=t._idList[e];return r==null&&t._idDimIdx!=null&&(r=j(t,t._idDimIdx,e)),r==null&&(r=rn+e),r},tt=function(t){return $(t)||(t=t!=null?[t]:[]),t},et=function(t){var e=new n(t._schema?t._schema:z(t.dimensions,t._getDimInfo,t),t.hostModel);return wt(e,t),e},wt=function(t,e){_(nn.concat(e.__wrappedMethods||[]),function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t.__wrappedMethods=e.__wrappedMethods,_(an,function(r){t[r]=$e(e[r])}),t._calculationInfo=H({},e._calculationInfo)},Lt=function(t,e){var r=t._nameList,a=t._idList,i=t._nameDimIdx,o=t._idDimIdx,s=r[e],u=a[e];if(s==null&&i!=null&&(r[e]=s=j(t,i,e)),u==null&&o!=null&&(a[e]=u=j(t,o,e)),u==null&&s!=null){var l=t._nameRepeatCount,c=l[s]=(l[s]||0)+1;u=s,c>1&&(u+="__ec__"+c),a[e]=u}}}(),n}();function oa(n,t,e){e=e||{};var r=e.byIndex,a=e.stackedCoordDimension,i,o,s;on(t)?i=t:(o=t.schema,i=o.dimensions,s=t.store);var u=!!(n&&n.get("stack")),l,c,h,v;if(_(i,function(p,x){st(p)&&(i[x]=p={name:p}),u&&!p.isExtraCoord&&(!r&&!l&&p.ordinalMeta&&(l=p),!c&&p.type!=="ordinal"&&p.type!=="time"&&(!a||a===p.coordDim)&&(c=p))}),c&&!r&&!l&&(r=!0),c){h="__\0ecstackresult_"+n.id,v="__\0ecstackedover_"+n.id,l&&(l.createInvertedIndices=!0);var f=c.coordDim,d=c.type,y=0;_(i,function(p){p.coordDim===f&&y++});var M={name:h,coordDim:f,coordDimIndex:y,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},m={name:v,coordDim:v,coordDimIndex:y+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};o?(s&&(M.storeDimIndex=s.ensureCalculationDimension(v,d),m.storeDimIndex=s.ensureCalculationDimension(h,d)),o.appendCalculationDimension(M),o.appendCalculationDimension(m)):(i.push(M),i.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:l&&l.name,isStackedByIndex:r,stackedOverDimension:v,stackResultDimension:h}}function on(n){return!Ie(n.schema)}function Se(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function sn(n,t){return Se(n,t)?n.getCalculationInfo("stackResultDimension"):t}var W=function(){function n(t){this._setting=t||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(t){return this._setting[t]},n.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},n.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(t,e){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(e)||(r[1]=e)},n.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(t){this._isBlank=t},n}();fr(W);var un=0,jt=function(){function n(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++un}return n.createByAxisModel=function(t){var e=t.option,r=e.data,a=r&&O(r,ln);return new n({categories:a,needCollect:!a,deduplication:e.dedplication!==!1})},n.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},n.prototype.parseAndCollect=function(t){var e,r=this._needCollect;if(!st(t)&&!r)return t;if(r&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var a=this._getOrCreateMap();return e=a.get(t),e==null&&(r?(e=this.categories.length,this.categories[e]=t,a.set(t,e)):e=NaN),e},n.prototype._getOrCreateMap=function(){return this._map||(this._map=pt(this.categories))},n}();function ln(n){return gt(n)&&n.value!=null?n.value:n+""}function sa(n){return n.type==="interval"||n.type==="log"}function cn(n,t,e,r){var a={},i=n[1]-n[0],o=a.interval=de(i/t,!0);e!=null&&o<e&&(o=a.interval=e),r!=null&&o>r&&(o=a.interval=r);var s=a.intervalPrecision=De(o),u=a.niceTickExtent=[G(Math.ceil(n[0]/o)*o,s),G(Math.floor(n[1]/o)*o,s)];return fn(u,n),a}function ua(n){var t=Math.pow(10,vr(n)),e=n/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,G(e*t)}function De(n){return Ft(n)+2}function te(n,t,e){n[t]=Math.max(Math.min(n[t],e[1]),e[0])}function fn(n,t){!isFinite(n[0])&&(n[0]=t[0]),!isFinite(n[1])&&(n[1]=t[1]),te(n,0,t),te(n,1,t),n[0]>n[1]&&(n[0]=n[1])}function yt(n,t){return n>=t[0]&&n<=t[1]}function _t(n,t){return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])}function Mt(n,t){return n*(t[1]-t[0])+t[0]}var Pt=function(n){X(t,n);function t(e){var r=n.call(this,e)||this;r.type="ordinal";var a=r.getSetting("ordinalMeta");return a||(a=new jt({})),$(a)&&(a=new jt({categories:O(a,function(i){return gt(i)?i.value:i})})),r._ordinalMeta=a,r._extent=r.getSetting("extent")||[0,a.categories.length-1],r}return t.prototype.parse=function(e){return e==null?NaN:st(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),yt(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),_t(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(Mt(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],r=this._extent,a=r[0];a<=r[1];)e.push({value:a}),a++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=e.ordinalNumbers,a=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,u=Math.min(s,r.length);o<u;++o){var l=r[o];a[o]=l,i[l]=o}for(var c=0;o<s;++o){for(;i[c]!=null;)c++;a.push(c),i[c]=o}},t.prototype._getTickNumber=function(e){var r=this._ticksByOrdinalNumber;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getRawOrdinalNumber=function(e){var r=this._ordinalNumbersByTick;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var r=this.getRawOrdinalNumber(e.value),a=this._ordinalMeta.categories[r];return a==null?"":a+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(W);W.registerClass(Pt);var q=G,ut=function(n){X(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return yt(e,this._extent)},t.prototype.normalize=function(e){return _t(e,this._extent)},t.prototype.scale=function(e){return Mt(e,this._extent)},t.prototype.setExtent=function(e,r){var a=this._extent;isNaN(e)||(a[0]=parseFloat(e)),isNaN(r)||(a[1]=parseFloat(r))},t.prototype.unionExtent=function(e){var r=this._extent;e[0]<r[0]&&(r[0]=e[0]),e[1]>r[1]&&(r[1]=e[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=De(e)},t.prototype.getTicks=function(e){var r=this._interval,a=this._extent,i=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var u=1e4;a[0]<i[0]&&(e?s.push({value:q(i[0]-r,o)}):s.push({value:a[0]}));for(var l=i[0];l<=i[1]&&(s.push({value:l}),l=q(l+r,o),l!==s[s.length-1].value);)if(s.length>u)return[];var c=s.length?s[s.length-1].value:i[1];return a[1]>c&&(e?s.push({value:q(c+r,o)}):s.push({value:a[1]})),s},t.prototype.getMinorTicks=function(e){for(var r=this.getTicks(!0),a=[],i=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],u=r[o-1],l=0,c=[],h=s.value-u.value,v=h/e;l<e-1;){var f=q(u.value+(l+1)*v);f>i[0]&&f<i[1]&&c.push(f),l++}a.push(c)}return a},t.prototype.getLabel=function(e,r){if(e==null)return"";var a=r&&r.precision;a==null?a=Ft(e.value)||0:a==="auto"&&(a=this._intervalPrecision);var i=q(e.value,a,!0);return hr(i)},t.prototype.calcNiceTicks=function(e,r,a){e=e||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var s=cn(i,e,r,a);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var a=Math.abs(r[0]);e.fixMax||(r[1]+=a/2),r[0]-=a/2}else r[1]=1;var i=r[1]-r[0];isFinite(i)||(r[0]=0,r[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(r[0]=q(Math.floor(r[0]/o)*o)),e.fixMax||(r[1]=q(Math.ceil(r[1]/o)*o))},t.prototype.setNiceExtent=function(e,r){this._niceExtent=[e,r]},t.type="interval",t}(W);W.registerClass(ut);var we=typeof Float32Array<"u",vn=we?Float32Array:Array;function Et(n){return $(n)?we?new Float32Array(n):n:new vn(n)}var At="__ec_stack_";function Le(n){return n.get("stack")||At+n.seriesIndex}function Bt(n){return n.dim+n.index}function la(n){var t=[],e=n.axis,r="axis0";if(e.type==="category"){for(var a=e.getBandWidth(),i=0;i<n.count;i++)t.push(Ke({bandWidth:a,axisKey:r,stackId:At+i},n));for(var o=Ce(t),s=[],i=0;i<n.count;i++){var u=o[r][At+i];u.offsetCenter=u.offset+u.width/2,s.push(u)}return s}}function Ee(n,t){var e=[];return t.eachSeriesByType(n,function(r){Ne(r)&&e.push(r)}),e}function hn(n){var t={};_(n,function(u){var l=u.coordinateSystem,c=l.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=u.getData(),v=c.dim+"_"+c.index,f=h.getDimensionIndex(h.mapDimension(c.dim)),d=h.getStore(),y=0,M=d.count();y<M;++y){var m=d.get(f,y);t[v]?t[v].push(m):t[v]=[m]}});var e={};for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];if(a){a.sort(function(u,l){return u-l});for(var i=null,o=1;o<a.length;++o){var s=a[o]-a[o-1];s>0&&(i=i===null?s:Math.min(i,s))}e[r]=i}}return e}function Oe(n){var t=hn(n),e=[];return _(n,function(r){var a=r.coordinateSystem,i=a.getBaseAxis(),o=i.getExtent(),s;if(i.type==="category")s=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var u=i.dim+"_"+i.index,l=t[u],c=Math.abs(o[1]-o[0]),h=i.scale.getExtent(),v=Math.abs(h[1]-h[0]);s=l?c/v*l:c}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var d=rt(r.get("barWidth"),s),y=rt(r.get("barMaxWidth"),s),M=rt(r.get("barMinWidth")||(ke(r)?.5:1),s),m=r.get("barGap"),p=r.get("barCategoryGap");e.push({bandWidth:s,barWidth:d,barMaxWidth:y,barMinWidth:M,barGap:m,barCategoryGap:p,axisKey:Bt(i),stackId:Le(r)})}),Ce(e)}function Ce(n){var t={};_(n,function(r,a){var i=r.axisKey,o=r.bandWidth,s=t[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},u=s.stacks;t[i]=s;var l=r.stackId;u[l]||s.autoWidthCount++,u[l]=u[l]||{width:0,maxWidth:0};var c=r.barWidth;c&&!u[l].width&&(u[l].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var h=r.barMaxWidth;h&&(u[l].maxWidth=h);var v=r.barMinWidth;v&&(u[l].minWidth=v);var f=r.barGap;f!=null&&(s.gap=f);var d=r.barCategoryGap;d!=null&&(s.categoryGap=d)});var e={};return _(t,function(r,a){e[a]={};var i=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var u=Tt(i).length;s=Math.max(35-u*4,15)+"%"}var l=rt(s,o),c=rt(r.gap,1),h=r.remainedWidth,v=r.autoWidthCount,f=(h-l)/(v+(v-1)*c);f=Math.max(f,0),_(i,function(m){var p=m.maxWidth,x=m.minWidth;if(m.width){var g=m.width;p&&(g=Math.min(g,p)),x&&(g=Math.max(g,x)),m.width=g,h-=g+c*g,v--}else{var g=f;p&&p<g&&(g=Math.min(p,h)),x&&x>g&&(g=x),g!==f&&(m.width=g,h-=g+c*g,v--)}}),f=(h-l)/(v+(v-1)*c),f=Math.max(f,0);var d=0,y;_(i,function(m,p){m.width||(m.width=f),y=m,d+=m.width*(1+c)}),y&&(d-=y.width*c);var M=-d/2;_(i,function(m,p){e[a][p]=e[a][p]||{bandWidth:o,offset:M,width:m.width},M+=m.width*(1+c)})}),e}function dn(n,t,e){if(n&&t){var r=n[Bt(t)];return r}}function ca(n,t){var e=Ee(n,t),r=Oe(e);_(e,function(a){var i=a.getData(),o=a.coordinateSystem,s=o.getBaseAxis(),u=Le(a),l=r[Bt(s)][u],c=l.offset,h=l.width;i.setLayout({bandWidth:l.bandWidth,offset:c,size:h})})}function fa(n){return{seriesType:n,plan:Cr(),reset:function(t){if(Ne(t)){var e=t.getData(),r=t.coordinateSystem,a=r.getBaseAxis(),i=r.getOtherAxis(a),o=e.getDimensionIndex(e.mapDimension(i.dim)),s=e.getDimensionIndex(e.mapDimension(a.dim)),u=t.get("showBackground",!0),l=e.mapDimension(i.dim),c=e.getCalculationInfo("stackResultDimension"),h=Se(e,l)&&!!e.getCalculationInfo("stackedOnSeries"),v=i.isHorizontal(),f=mn(a,i),d=ke(t),y=t.get("barMinHeight")||0,M=c&&e.getDimensionIndex(c),m=e.getLayout("size"),p=e.getLayout("offset");return{progress:function(x,g){for(var L=x.count,k=d&&Et(L*3),R=d&&u&&Et(L*3),K=d&&Et(L),U=r.master.getRect(),D=v?U.width:U.height,b,F=g.getStore(),C=0;(b=x.next())!=null;){var Y=F.get(h?M:o,b),E=F.get(s,b),N=f,P=void 0;h&&(P=+Y-F.get(o,b));var I=void 0,S=void 0,w=void 0,B=void 0;if(v){var J=r.dataToPoint([Y,E]);if(h){var xt=r.dataToPoint([P,E]);N=xt[0]}I=N,S=J[1]+p,w=J[0]-N,B=m,Math.abs(w)<y&&(w=(w<0?-1:1)*y)}else{var J=r.dataToPoint([E,Y]);if(h){var xt=r.dataToPoint([E,P]);N=xt[1]}I=J[0]+p,S=N,w=m,B=J[1]-N,Math.abs(B)<y&&(B=(B<=0?-1:1)*y)}d?(k[C]=I,k[C+1]=S,k[C+2]=v?w:B,R&&(R[C]=v?U.x:I,R[C+1]=v?S:U.y,R[C+2]=D),K[b]=b):g.setItemLayout(b,{x:I,y:S,width:w,height:B}),C+=3}d&&g.setLayout({largePoints:k,largeDataIndices:K,largeBackgroundPoints:R,valueAxisHorizontal:v})}}}}}}function Ne(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function ke(n){return n.pipelineContext&&n.pipelineContext.large}function mn(n,t){var e=t.model.get("startValue");return e||(e=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?e>0?e:1:e))}var pn=function(n,t,e,r){for(;e<r;){var a=e+r>>>1;n[a][1]<t?e=a+1:r=a}return e},Re=function(n){X(t,n);function t(e){var r=n.call(this,e)||this;return r.type="time",r}return t.prototype.getLabel=function(e){var r=this.getSetting("useUTC");return dr(e.value,Ut[mr(nt(this._minLevelUnit))]||Ut.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,r,a){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return pr(e,r,a,o,i)},t.prototype.getTicks=function(){var e=this._interval,r=this._extent,a=[];if(!e)return a;a.push({value:r[0],level:0});var i=this.getSetting("useUTC"),o=In(this._minLevelUnit,this._approxInterval,i,r);return a=a.concat(o),a.push({value:r[1],level:0}),a},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1]&&(r[0]-=T,r[1]+=T),r[1]===-1/0&&r[0]===1/0){var a=new Date;r[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),r[0]=r[1]-T}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,r,a){e=e||10;var i=this._extent,o=i[1]-i[0];this._approxInterval=o/e,r!=null&&this._approxInterval<r&&(this._approxInterval=r),a!=null&&this._approxInterval>a&&(this._approxInterval=a);var s=ft.length,u=Math.min(pn(ft,this._approxInterval,0,s),s-1);this._interval=ft[u][1],this._minLevelUnit=ft[Math.max(u-1,0)][0]},t.prototype.parse=function(e){return fe(e)?e:+Rt(e)},t.prototype.contain=function(e){return yt(this.parse(e),this._extent)},t.prototype.normalize=function(e){return _t(this.parse(e),this._extent)},t.prototype.scale=function(e){return Mt(e,this._extent)},t.type="time",t}(ut),ft=[["second",me],["minute",pe],["hour",mt],["quarter-day",mt*6],["half-day",mt*12],["day",T*1.2],["half-week",T*3.5],["week",T*7],["month",T*31],["quarter",T*95],["half-year",Yt/2],["year",Yt]];function gn(n,t,e,r){var a=Rt(t),i=Rt(e),o=function(d){return qt(a,d,r)===qt(i,d,r)},s=function(){return o("year")},u=function(){return s()&&o("month")},l=function(){return u()&&o("day")},c=function(){return l()&&o("hour")},h=function(){return c()&&o("minute")},v=function(){return h()&&o("second")},f=function(){return v()&&o("millisecond")};switch(n){case"year":return s();case"month":return u();case"day":return l();case"hour":return c();case"minute":return h();case"second":return v();case"millisecond":return f()}}function yn(n,t){return n/=T,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function _n(n){var t=30*T;return n/=t,n>6?6:n>3?3:n>2?2:1}function Mn(n){return n/=mt,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function ee(n,t){return n/=t?pe:me,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function xn(n){return de(n,!0)}function bn(n,t,e){var r=new Date(n);switch(nt(t)){case"year":case"month":r[be(e)](0);case"day":r[xe(e)](1);case"hour":r[Me(e)](0);case"minute":r[_e(e)](0);case"second":r[ge(e)](0),r[ye(e)](0)}return r.getTime()}function In(n,t,e,r){var a=1e4,i=gr,o=0;function s(D,b,F,C,Y,E,N){for(var P=new Date(b),I=b,S=P[C]();I<F&&I<=r[1];)N.push({value:I}),S+=D,P[Y](S),I=P.getTime();N.push({value:I,notAdd:!0})}function u(D,b,F){var C=[],Y=!b.length;if(!gn(nt(D),r[0],r[1],e)){Y&&(b=[{value:bn(new Date(r[0]),D,e)},{value:r[1]}]);for(var E=0;E<b.length-1;E++){var N=b[E].value,P=b[E+1].value;if(N!==P){var I=void 0,S=void 0,w=void 0,B=!1;switch(D){case"year":I=Math.max(1,Math.round(t/T/365)),S=Dr(e),w=wr(e);break;case"half-year":case"quarter":case"month":I=_n(t),S=Sr(e),w=be(e);break;case"week":case"half-week":case"day":I=yn(t),S=Ir(e),w=xe(e),B=!0;break;case"half-day":case"quarter-day":case"hour":I=Mn(t),S=br(e),w=Me(e);break;case"minute":I=ee(t,!0),S=xr(e),w=_e(e);break;case"second":I=ee(t,!1),S=Mr(e),w=ge(e);break;case"millisecond":I=xn(t),S=_r(e),w=ye(e);break}s(I,N,P,S,w,B,C),D==="year"&&F.length>1&&E===0&&F.unshift({value:F[0].value-I})}}for(var E=0;E<C.length;E++)F.push(C[E]);return C}}for(var l=[],c=[],h=0,v=0,f=0;f<i.length&&o++<a;++f){var d=nt(i[f]);if(yr(i[f])){u(i[f],l[l.length-1]||[],c);var y=i[f+1]?nt(i[f+1]):null;if(d!==y){if(c.length){v=h,c.sort(function(D,b){return D.value-b.value});for(var M=[],m=0;m<c.length;++m){var p=c[m].value;(m===0||c[m-1].value!==p)&&(M.push(c[m]),p>=r[0]&&p<=r[1]&&h++)}var x=(r[1]-r[0])/t;if(h>x*1.5&&v>x/1.5||(l.push(M),h>x||n===i[f]))break}c=[]}}}for(var g=it(O(l,function(D){return it(D,function(b){return b.value>=r[0]&&b.value<=r[1]&&!b.notAdd})}),function(D){return D.length>0}),L=[],k=g.length-1,f=0;f<g.length;++f)for(var R=g[f],K=0;K<R.length;++K)L.push({value:R[K].value,level:k-f});L.sort(function(D,b){return D.value-b.value});for(var U=[],f=0;f<L.length;++f)(f===0||L[f].value!==L[f-1].value)&&U.push(L[f]);return U}W.registerClass(Re);var re=W.prototype,at=ut.prototype,Sn=G,Dn=Math.floor,wn=Math.ceil,vt=Math.pow,A=Math.log,Vt=function(n){X(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new ut,e._interval=0,e}return t.prototype.getTicks=function(e){var r=this._originalScale,a=this._extent,i=r.getExtent(),o=at.getTicks.call(this,e);return O(o,function(s){var u=s.value,l=G(vt(this.base,u));return l=u===a[0]&&this._fixMin?ht(l,i[0]):l,l=u===a[1]&&this._fixMax?ht(l,i[1]):l,{value:l}},this)},t.prototype.setExtent=function(e,r){var a=A(this.base);e=A(Math.max(0,e))/a,r=A(Math.max(0,r))/a,at.setExtent.call(this,e,r)},t.prototype.getExtent=function(){var e=this.base,r=re.getExtent.call(this);r[0]=vt(e,r[0]),r[1]=vt(e,r[1]);var a=this._originalScale,i=a.getExtent();return this._fixMin&&(r[0]=ht(r[0],i[0])),this._fixMax&&(r[1]=ht(r[1],i[1])),r},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var r=this.base;e[0]=A(e[0])/A(r),e[1]=A(e[1])/A(r),re.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(e){e=e||10;var r=this._extent,a=r[1]-r[0];if(!(a===1/0||a<=0)){var i=Lr(a),o=e/a*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var s=[G(wn(r[0]/i)*i),G(Dn(r[1]/i)*i)];this._interval=i,this._niceExtent=s}},t.prototype.calcNiceExtent=function(e){at.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=A(e)/A(this.base),yt(e,this._extent)},t.prototype.normalize=function(e){return e=A(e)/A(this.base),_t(e,this._extent)},t.prototype.scale=function(e){return e=Mt(e,this._extent),vt(this.base,e)},t.type="log",t}(W),Ae=Vt.prototype;Ae.getMinorTicks=at.getMinorTicks;Ae.getLabel=at.getLabel;function ht(n,t){return Sn(n,Ft(t))}W.registerClass(Vt);var Ln=function(){function n(t,e,r){this._prepareParams(t,e,r)}return n.prototype._prepareParams=function(t,e,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var a=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var i=e.get("min",!0);i==null&&(i=e.get("startValue",!0));var o=this._modelMinRaw=i;V(o)?this._modelMinNum=dt(t,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=dt(t,o));var s=this._modelMaxRaw=e.get("max",!0);if(V(s)?this._modelMaxNum=dt(t,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=dt(t,s)),a)this._axisDataLen=e.getCategories().length;else{var u=e.get("boundaryGap"),l=$(u)?u:[u||0,u||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Wt(l[0],1),Wt(l[1],1)]}},n.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,r=this._dataMax,a=this._axisDataLen,i=this._boundaryGapInner,o=t?null:r-e||Math.abs(e),s=this._modelMinRaw==="dataMin"?e:this._modelMinNum,u=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,l=s!=null,c=u!=null;s==null&&(s=t?a?0:NaN:e-i[0]*o),u==null&&(u=t?a?a-1:NaN:r+i[1]*o),(s==null||!isFinite(s))&&(s=NaN),(u==null||!isFinite(u))&&(u=NaN);var h=Nt(s)||Nt(u)||t&&!a;this._needCrossZero&&(s>0&&u>0&&!l&&(s=0),s<0&&u<0&&!c&&(u=0));var v=this._determinedMin,f=this._determinedMax;return v!=null&&(s=v,l=!0),f!=null&&(u=f,c=!0),{min:s,max:u,minFixed:l,maxFixed:c,isBlank:h}},n.prototype.modifyDataMinMax=function(t,e){this[On[t]]=e},n.prototype.setDeterminedMinMax=function(t,e){var r=En[t];this[r]=e},n.prototype.freeze=function(){this.frozen=!0},n}(),En={min:"_determinedMin",max:"_determinedMax"},On={min:"_dataMin",max:"_dataMax"};function Cn(n,t,e){var r=n.rawExtentInfo;return r||(r=new Ln(n,t,e),n.rawExtentInfo=r,r)}function dt(n,t){return t==null?null:Nt(t)?NaN:n.parse(t)}function Nn(n,t){var e=n.type,r=Cn(n,t,n.getExtent()).calculate();n.setBlank(r.isBlank);var a=r.min,i=r.max,o=t.ecModel;if(o&&e==="time"){var s=Ee("bar",o),u=!1;if(_(s,function(h){u=u||h.getBaseAxis()===t.axis}),u){var l=Oe(s),c=kn(a,i,t,l);a=c.min,i=c.max}}return{extent:[a,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function kn(n,t,e,r){var a=e.axis.getExtent(),i=Math.abs(a[1]-a[0]),o=dn(r,e.axis);if(o===void 0)return{min:n,max:t};var s=1/0;_(o,function(f){s=Math.min(f.offset,s)});var u=-1/0;_(o,function(f){u=Math.max(f.offset+f.width,u)}),s=Math.abs(s),u=Math.abs(u);var l=s+u,c=t-n,h=1-(s+u)/i,v=c/h-c;return t+=v*(u/l),n-=v*(s/l),{min:n,max:t}}function va(n,t){var e=t,r=Nn(n,e),a=r.extent,i=e.get("splitNumber");n instanceof Vt&&(n.base=e.get("logBase"));var o=n.type,s=e.get("interval"),u=o==="interval"||o==="time";n.setExtent(a[0],a[1]),n.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:u?e.get("minInterval"):null,maxInterval:u?e.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function ha(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new Pt({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new Re({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(W.getClass(t)||ut)}}function da(n){var t=n.scale.getExtent(),e=t[0],r=t[1];return!(e>0&&r>0||e<0&&r<0)}function Z(n){var t=n.getLabelModel().get("formatter"),e=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(r){return function(a,i){return n.scale.getFormattedLabel(a,i,r)}}(t):st(t)?function(r){return function(a){var i=n.scale.getLabel(a),o=r.replace("{value}",i??"");return o}}(t):V(t)?function(r){return function(a,i){return e!=null&&(i=a.value-e),r(Rn(n,a),i,a.level!=null?{level:a.level}:null)}}(t):function(r){return n.scale.getLabel(r)}}function Rn(n,t){return n.type==="category"?n.scale.getLabel(t):t.value}function ma(n){var t=n.model,e=n.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var r,a,i=e.getExtent();e instanceof Pt?a=e.count():(r=e.getTicks(),a=r.length);var o=n.getLabelModel(),s=Z(n),u,l=1;a>40&&(l=Math.ceil(a/40));for(var c=0;c<a;c+=l){var h=r?r[c]:{value:i[0]+c},v=s(h,c),f=o.getTextRect(v),d=An(f,o.get("rotate")||0);u?u.union(d):u=d}return u}}function An(n,t){var e=t*Math.PI/180,r=n.width,a=n.height,i=r*Math.abs(Math.cos(e))+Math.abs(a*Math.sin(e)),o=r*Math.abs(Math.sin(e))+Math.abs(a*Math.cos(e)),s=new kt(n.x,n.y,i,o);return s}function Gt(n){var t=n.get("interval");return t??"auto"}function Tn(n){return n.type==="category"&&Gt(n.getLabelModel())===0}function Fn(n,t){var e={};return _(n.mapDimensionsAll(t),function(r){e[sn(n,r)]=!0}),Tt(e)}function pa(n,t,e){t&&_(Fn(t,e),function(r){var a=t.getApproximateExtent(r);a[0]<n[0]&&(n[0]=a[0]),a[1]>n[1]&&(n[1]=a[1])})}var ga=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},n.prototype.getCoordSysModel=function(){},n}(),ne=[],Pn={registerPreprocessor:Ur,registerProcessor:Hr,registerPostInit:zr,registerPostUpdate:Wr,registerUpdateLifecycle:Gr,registerAction:Vr,registerCoordinateSystem:Br,registerLayout:Pr,registerVisual:Fr,registerTransform:Tr,registerLoading:Ar,registerMap:Rr,registerImpl:kr,PRIORITY:Nr,ComponentModel:It,ComponentView:Zt,SeriesModel:$t,ChartView:Xt,registerComponentModel:function(n){It.registerClass(n)},registerComponentView:function(n){Zt.registerClass(n)},registerSeriesModel:function(n){$t.registerClass(n)},registerChartView:function(n){Xt.registerClass(n)},registerSubTypeDefaulter:function(n,t){It.registerSubTypeDefaulter(n,t)},registerPainter:function(n,t){Yr(n,t)}};function Bn(n){if($(n)){_(n,function(t){Bn(t)});return}Xe(ne,n)>=0||(ne.push(n),V(n)&&(n={install:n}),n.install(Pn))}var Vn=1e-8;function ae(n,t){return Math.abs(n-t)<Vn}function ie(n,t,e){var r=0,a=n[0];if(!a)return!1;for(var i=1;i<n.length;i++){var o=n[i];r+=zt(a[0],a[1],o[0],o[1],t,e),a=o}var s=n[0];return(!ae(a[0],s[0])||!ae(a[1],s[1]))&&(r+=zt(a[0],a[1],s[0],s[1],t,e)),r!==0}var Gn=[];function Ot(n,t){for(var e=0;e<n.length;e++)ve(n[e],n[e],t)}function oe(n,t,e,r){for(var a=0;a<n.length;a++){var i=n[a];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Ze(t,t,i),Je(e,e,i))}}function Wn(n){for(var t=0,e=0,r=0,a=n.length,i=n[a-1][0],o=n[a-1][1],s=0;s<a;s++){var u=n[s][0],l=n[s][1],c=i*l-u*o;t+=c,e+=(i+u)*c,r+=(o+l)*c,i=u,o=l}return t?[e/t/3,r/t/3,t]:[n[0][0]||0,n[0][1]||0]}var Te=function(){function n(t){this.name=t}return n.prototype.setCenter=function(t){this._center=t},n.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},n}(),se=function(){function n(t,e){this.type="polygon",this.exterior=t,this.interiors=e}return n}(),ue=function(){function n(t){this.type="linestring",this.points=t}return n}(),zn=function(n){X(t,n);function t(e,r,a){var i=n.call(this,e)||this;return i.type="geoJSON",i.geometries=r,i._center=a&&[a[0],a[1]],i}return t.prototype.calcCenter=function(){for(var e=this.geometries,r,a=0,i=0;i<e.length;i++){var o=e[i],s=o.exterior,u=s&&s.length;u>a&&(r=o,a=u)}if(r)return Wn(r.exterior);var l=this.getBoundingRect();return[l.x+l.width/2,l.y+l.height/2]},t.prototype.getBoundingRect=function(e){var r=this._rect;if(r&&!e)return r;var a=[1/0,1/0],i=[-1/0,-1/0],o=this.geometries;return _(o,function(s){s.type==="polygon"?oe(s.exterior,a,i,e):_(s.points,function(u){oe(u,a,i,e)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(i[0])&&isFinite(i[1])||(a[0]=a[1]=i[0]=i[1]=0),r=new kt(a[0],a[1],i[0]-a[0],i[1]-a[1]),e||(this._rect=r),r},t.prototype.contain=function(e){var r=this.getBoundingRect(),a=this.geometries;if(!r.contain(e[0],e[1]))return!1;t:for(var i=0,o=a.length;i<o;i++){var s=a[i];if(s.type==="polygon"){var u=s.exterior,l=s.interiors;if(ie(u,e[0],e[1])){for(var c=0;c<(l?l.length:0);c++)if(ie(l[c],e[0],e[1]))continue t;return!0}}}return!1},t.prototype.transformTo=function(e,r,a,i){var o=this.getBoundingRect(),s=o.width/o.height;a?i||(i=a/s):a=s*i;for(var u=new kt(e,r,a,i),l=o.calculateTransform(u),c=this.geometries,h=0;h<c.length;h++){var v=c[h];v.type==="polygon"?(Ot(v.exterior,l),_(v.interiors,function(f){Ot(f,l)})):_(v.points,function(f){Ot(f,l)})}o=this._rect,o.copy(u),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(e){e==null&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(Te),ya=function(n){X(t,n);function t(e,r){var a=n.call(this,e)||this;return a.type="geoSVG",a._elOnlyForCalculate=r,a}return t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,r=e.getBoundingRect(),a=[r.x+r.width/2,r.y+r.height/2],i=Qe(Gn),o=e;o&&!o.isGeoSVGGraphicRoot;)je(i,o.getLocalTransform(),i),o=o.parent;return tr(i,i),ve(a,a,i),a},t}(Te);function Hn(n){if(!n.UTF8Encoding)return n;var t=n,e=t.UTF8Scale;e==null&&(e=1024);var r=t.features;return _(r,function(a){var i=a.geometry,o=i.encodeOffsets,s=i.coordinates;if(o)switch(i.type){case"LineString":i.coordinates=Fe(s,o,e);break;case"Polygon":Ct(s,o,e);break;case"MultiLineString":Ct(s,o,e);break;case"MultiPolygon":_(s,function(u,l){return Ct(u,o[l],e)})}}),t.UTF8Encoding=!1,t}function Ct(n,t,e){for(var r=0;r<n.length;r++)n[r]=Fe(n[r],t[r],e)}function Fe(n,t,e){for(var r=[],a=t[0],i=t[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,u=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),u=u>>1^-(u&1),s+=a,u+=i,a=s,i=u,r.push([s/e,u/e])}return r}function _a(n,t){return n=Hn(n),O(it(n.features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var r=e.properties,a=e.geometry,i=[];switch(a.type){case"Polygon":var o=a.coordinates;i.push(new se(o[0],o.slice(1)));break;case"MultiPolygon":_(a.coordinates,function(u){u[0]&&i.push(new se(u[0],u.slice(1)))});break;case"LineString":i.push(new ue([a.coordinates]));break;case"MultiLineString":i.push(new ue(a.coordinates))}var s=new zn(r[t||"name"],i,r.cp);return s.properties=r,s})}var ot=he();function Pe(n,t){var e=O(t,function(r){return n.scale.parse(r)});return n.type==="time"&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function Un(n){var t=n.getLabelModel().get("customValues");if(t){var e=Z(n),r=n.scale.getExtent(),a=Pe(n,t),i=it(a,function(o){return o>=r[0]&&o<=r[1]});return{labels:O(i,function(o){var s={value:o};return{formattedLabel:e(s),rawLabel:n.scale.getLabel(s),tickValue:o}})}}return n.type==="category"?qn(n):Kn(n)}function Yn(n,t){var e=n.getTickModel().get("customValues");if(e){var r=n.scale.getExtent(),a=Pe(n,e);return{ticks:it(a,function(i){return i>=r[0]&&i<=r[1]})}}return n.type==="category"?$n(n,t):{ticks:O(n.scale.getTicks(),function(i){return i.value})}}function qn(n){var t=n.getLabelModel(),e=Be(n,t);return!t.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function Be(n,t){var e=Ve(n,"labels"),r=Gt(t),a=Ge(e,r);if(a)return a;var i,o;return V(r)?i=He(n,r):(o=r==="auto"?Xn(n):r,i=ze(n,o)),We(e,r,{labels:i,labelCategoryInterval:o})}function $n(n,t){var e=Ve(n,"ticks"),r=Gt(t),a=Ge(e,r);if(a)return a;var i,o;if((!t.get("show")||n.scale.isBlank())&&(i=[]),V(r))i=He(n,r,!0);else if(r==="auto"){var s=Be(n,n.getLabelModel());o=s.labelCategoryInterval,i=O(s.labels,function(u){return u.tickValue})}else o=r,i=ze(n,o,!0);return We(e,r,{ticks:i,tickCategoryInterval:o})}function Kn(n){var t=n.scale.getTicks(),e=Z(n);return{labels:O(t,function(r,a){return{level:r.level,formattedLabel:e(r,a),rawLabel:n.scale.getLabel(r),tickValue:r.value}})}}function Ve(n,t){return ot(n)[t]||(ot(n)[t]=[])}function Ge(n,t){for(var e=0;e<n.length;e++)if(n[e].key===t)return n[e].value}function We(n,t,e){return n.push({key:t,value:e}),e}function Xn(n){var t=ot(n).autoInterval;return t??(ot(n).autoInterval=n.calculateCategoryInterval())}function Zn(n){var t=Jn(n),e=Z(n),r=(t.axisRotate-t.labelRotate)/180*Math.PI,a=n.scale,i=a.getExtent(),o=a.count();if(i[1]-i[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var u=i[0],l=n.dataToCoord(u+1)-n.dataToCoord(u),c=Math.abs(l*Math.cos(r)),h=Math.abs(l*Math.sin(r)),v=0,f=0;u<=i[1];u+=s){var d=0,y=0,M=er(e({value:u}),t.font,"center","top");d=M.width*1.3,y=M.height*1.3,v=Math.max(v,d,7),f=Math.max(f,y,7)}var m=v/c,p=f/h;isNaN(m)&&(m=1/0),isNaN(p)&&(p=1/0);var x=Math.max(0,Math.floor(Math.min(m,p))),g=ot(n.model),L=n.getExtent(),k=g.lastAutoInterval,R=g.lastTickCount;return k!=null&&R!=null&&Math.abs(k-x)<=1&&Math.abs(R-o)<=1&&k>x&&g.axisExtent0===L[0]&&g.axisExtent1===L[1]?x=k:(g.lastTickCount=o,g.lastAutoInterval=x,g.axisExtent0=L[0],g.axisExtent1=L[1]),x}function Jn(n){var t=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function ze(n,t,e){var r=Z(n),a=n.scale,i=a.getExtent(),o=n.getLabelModel(),s=[],u=Math.max((t||0)+1,1),l=i[0],c=a.count();l!==0&&u>1&&c/u>2&&(l=Math.round(Math.ceil(l/u)*u));var h=Tn(n),v=o.get("showMinLabel")||h,f=o.get("showMaxLabel")||h;v&&l!==i[0]&&y(i[0]);for(var d=l;d<=i[1];d+=u)y(d);f&&d-u!==i[1]&&y(i[1]);function y(M){var m={value:M};s.push(e?M:{formattedLabel:r(m),rawLabel:a.getLabel(m),tickValue:M})}return s}function He(n,t,e){var r=n.scale,a=Z(n),i=[];return _(r.getTicks(),function(o){var s=r.getLabel(o),u=o.value;t(o.value,s)&&i.push(e?u:{formattedLabel:a(o),rawLabel:s,tickValue:u})}),i}var le=[0,1],Ma=function(){function n(t,e,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=r||[0,0]}return n.prototype.contain=function(t){var e=this._extent,r=Math.min(e[0],e[1]),a=Math.max(e[0],e[1]);return t>=r&&t<=a},n.prototype.containData=function(t){return this.scale.contain(t)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(t){return Er(t||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(t,e){var r=this._extent;r[0]=t,r[1]=e},n.prototype.dataToCoord=function(t,e){var r=this._extent,a=this.scale;return t=a.normalize(t),this.onBand&&a.type==="ordinal"&&(r=r.slice(),ce(r,a.count())),Kt(t,le,r,e)},n.prototype.coordToData=function(t,e){var r=this._extent,a=this.scale;this.onBand&&a.type==="ordinal"&&(r=r.slice(),ce(r,a.count()));var i=Kt(t,r,le,e);return this.scale.scale(i)},n.prototype.pointToData=function(t,e){},n.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),r=Yn(this,e),a=r.ticks,i=O(a,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=e.get("alignWithLabel");return Qn(this,i,o,t.clamp),i},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var r=this.scale.getMinorTicks(e),a=O(r,function(i){return O(i,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return a},n.prototype.getViewLabels=function(){return Un(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),r=e[1]-e[0]+(this.onBand?1:0);r===0&&(r=1);var a=Math.abs(t[1]-t[0]);return Math.abs(a)/r},n.prototype.calculateCategoryInterval=function(){return Zn(this)},n}();function ce(n,t){var e=n[1]-n[0],r=t,a=e/r/2;n[0]+=a,n[1]-=a}function Qn(n,t,e,r){var a=t.length;if(!n.onBand||e||!a)return;var i=n.getExtent(),o,s;if(a===1)t[0].coord=i[0],o=t[1]={coord:i[1],tickValue:t[0].tickValue};else{var u=t[a-1].tickValue-t[0].tickValue,l=(t[a-1].coord-t[0].coord)/u;_(t,function(f){f.coord-=l/2});var c=n.scale.getExtent();s=1+c[1]-t[a-1].tickValue,o={coord:t[a-1].coord+l*s,tickValue:c[1]+1},t.push(o)}var h=i[0]>i[1];v(t[0].coord,i[0])&&(r?t[0].coord=i[0]:t.shift()),r&&v(i[0],t[0].coord)&&t.unshift({coord:i[0]}),v(i[1],o.coord)&&(r?o.coord=i[1]:t.pop()),r&&v(o.coord,i[1])&&t.push({coord:i[1]});function v(f,d){return f=G(f),d=G(d),h?f>d:f<d}}export{ga as A,ma as B,sa as C,da as D,Tn as E,zn as F,ya as G,ut as I,Pt as O,ia as S,Re as T,Ma as a,Et as b,ha as c,fa as d,oa as e,aa as f,sn as g,la as h,Se as i,jr as j,Qr as k,ca as l,Jr as m,va as n,Dt as o,_a as p,Rn as q,Fn as r,tn as s,pa as t,Bn as u,Cn as v,ie as w,jt as x,Nn as y,ua as z};
